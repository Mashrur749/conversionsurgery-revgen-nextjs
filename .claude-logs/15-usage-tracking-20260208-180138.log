All done. Here's the summary:

## Phase 15: Usage Tracking & Cost Attribution — Complete

### 11 Commits Created

| # | Commit | Description |
|---|--------|-------------|
| 1 | `1abfca5` | Schema: 4 tables (api_usage, api_usage_daily, api_usage_monthly, usage_alerts) |
| 2 | `168c9dd` | Cost config: per-service rate calculations for 7 API services |
| 3 | `9546328` | Usage tracking service: trackUsage(), daily rollup, monthly summaries |
| 4 | `f161ae7` | Alert service: thresholds, spike detection, admin SMS notifications |
| 5 | `04cb2c5` | Tracked clients: openai-tracked.ts + twilio-tracked.ts wrappers |
| 6 | `48219c3` | API routes: GET usage summary, GET client detail, POST acknowledge alert |
| 7 | `25a8f5f` | Dashboard page: monthly selector, summary cards, client breakdown table |
| 8 | `3f7a9e5` | Client detail page: alerts, service breakdown, top operations |
| 9 | `bcf0f5e` | Cron integration: hourly monthly summaries + alert checks |
| 10 | `3fd9a2e` | Navigation: "Usage" link in admin Optimization group |
| 11 | `b3bd8b8` | QA checklist: 91 lines of test steps appended |

### Files Created (16 new, 3 modified)

**Schema (4 files):** api-usage.ts, api-usage-daily.ts, api-usage-monthly.ts, usage-alerts.ts
**Config (1 file):** src/lib/config/api-costs.ts
**Services (2 files):** usage-tracking.ts, usage-alerts.ts
**Tracked Clients (2 files):** openai-tracked.ts, twilio-tracked.ts
**API Routes (3 files):** /api/admin/usage, /api/admin/usage/[clientId], /api/admin/usage/alerts/[id]/acknowledge
**UI Pages (2 files):** /admin/usage (dashboard), /admin/usage/[clientId] (detail)
**UI Components (2 files):** usage-dashboard.tsx, client-usage-detail.tsx

**Modified:** schema/index.ts (exports), layout.tsx (nav), cron/route.ts (hourly job)

### Key Adaptations from Doc
- Used `getDb()` per-request pattern instead of singleton `db`
- Used `auth()` + `(session as any)?.user?.isAdmin` with 403 (not 401)
- Used `sql\`uuid_generate_v4()\`` instead of `.defaultRandom()`
- Used array index syntax `(table) => [...]` for schema indexes
- Adapted to Next.js 16 `Promise<{ id: string }>` async params
- Placed pages under `(dashboard)` route group for admin layout
- Adapted `sendSMS(to, from, body)` signature from existing twilio.ts
- Installed shadcn `table` component (was missing)
- Skipped `sonner` toast (not installed) — used refetch pattern instead
- Added `gpt-4-turbo-preview` to cost config (used in existing openai.ts)
